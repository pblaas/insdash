{% extends 'widgetlayout.html' %}

{% block body %}

<div class="widget">
    <div class="wservername">
        {{ data["name"] }}
    </div>
    <div class="wserverinfo">
        <div class="col-12">
            Mode: {{ data["keywords"].rsplit(',')[6].rsplit(':')[1] }}
        </div>
        <div class="col-12">
            Map: {{ data["map"] }}
        </div>
        <div class="col-12">
            Ping: {{ data["_ping"] | round | int }}
        </div>
        <div class="col-12">
            Players: {{ data["players"] }} / {{ data["max_players"] }}
        </div>
        <div class="col-12">
                {% if "true" in data["keywords"].rsplit(',')[2].rsplit(':')[1] %}
                Ranked: <span class="oi oi-check green"></span>
                {% else %}
                Ranked: <span class="oi oi-minus red"></span>
                {% endif %}
        </div>
        <div class="col-12">
                {% if "true" in data["keywords"].rsplit(',')[7].rsplit(':')[1] %}
                Password: <span class="oi oi-lock-locked red"></span>
                {% else %}
                Password: <span class="oi oi-lock-unlocked green"></span>
                {% endif %}
            </div>
        <div class="col-12">
            Connect: <a href="steam://connect/{{ addr[0] }}:{{ addr[1] }}"><span class="oi oi-bolt"></span> </a>
        </div>

    </div>

    {% if "Oilfield" in data["map"] %}
    <img src="/static/thumb_refinery.jpg" class="responsive mapstyle">

    {% elif "Town" in data["map"] %}
    <img src="/static/thumb_hideout.jpg" class="responsive mapstyle">

    {% elif "Farmhouse" in data["map"] %}
    <img src="/static/thumb_farmhouse.jpg" class="responsive mapstyle">

    {% elif "Precinct" in data["map"] %}
    <img src="/static/thumb_precinct.jpg" class="responsive mapstyle">
    
    {% elif "Mountain" in data["map"] %}
    <img src="/static/thumb_summit.jpg" class="responsive mapstyle">
    
    {% elif "Canyon" in data["map"] %}
    <img src="/static/thumb_crossing.jpg" class="responsive mapstyle">
    
    {% else %}
    <img src="/static/thumb_fallback.jpg" class="responsive mapstyle">
    
    {% endif %}

</div>

{% endblock %}